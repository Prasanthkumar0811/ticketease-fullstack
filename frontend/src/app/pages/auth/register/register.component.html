<div class="auth-wrapper">

  <!-- LEFT SIDE (FORM) -->
  <div class="auth-left">
    <mat-card class="register-card">

      <h2 class="title">Create Account</h2>

      <form [formGroup]="registerForm" (ngSubmit)="submit()">

        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Full Name</mat-label>
          <input matInput formControlName="name">
          <mat-error *ngIf="registerForm.get('name')?.hasError('required')">
            Name is required
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Email</mat-label>
          <input matInput formControlName="email">
          <mat-error *ngIf="registerForm.get('email')?.hasError('required')">
            Email is required
          </mat-error>
          <mat-error *ngIf="registerForm.get('email')?.hasError('email')">
            Invalid email format
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Phone</mat-label>
          <input matInput formControlName="phone">
          <mat-error *ngIf="registerForm.get('phone')?.hasError('required')">
            Phone is required
          </mat-error>
          <mat-error *ngIf="registerForm.get('phone')?.hasError('pattern')">
            Enter valid 10 digit number
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Password</mat-label>
          <input matInput type="password" formControlName="password">
          <mat-error *ngIf="registerForm.get('password')?.hasError('required')">
            Password is required
          </mat-error>
          <mat-error *ngIf="registerForm.get('password')?.hasError('minlength')">
            Minimum 6 characters
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Confirm Password</mat-label>
          <input matInput type="password" formControlName="confirmPassword">
          <mat-error *ngIf="registerForm.hasError('passwordMismatch')">
            Passwords do not match
          </mat-error>
        </mat-form-field>

        <div class="error-msg" *ngIf="backendError" style="color: red;">
          {{ backendError }}
        </div>

        <button
          mat-raised-button
          color="primary"
          class="w-100 register-btn"
          type="submit"
          [disabled]="registerForm.invalid || isSubmitting">

          Register
        </button>

      </form>

      <p class="login-link">
        Already have account?
        <a routerLink="/login">Login</a>
      </p>

    </mat-card>
  </div>


  <!-- RIGHT SIDE (ANIMATION) -->
  <div class="auth-right">
    <div #lottieContainer class="lottie-box"></div>
  </div>

</div>

<!-- Loading -->
<div class="loading-overlay" *ngIf="isSubmitting">
  <mat-spinner diameter="50"></mat-spinner>
</div>
